const express = require("express");
const _ = require("lodash");
const router = express.Router();
const posts = require("./post.json");
const gets = require("./get.json");
const actionRoutes = require("./actionroutes");
const fs = require('fs')
const path = require('path')
const mockRoute = require('./middleware/mockRoute.js')
const checklogin = require("./middleware/login.js");
const login = require('../actions/login.js')
router.use(function(req, res, next) {
    console.log("Time:", Date.now());
    console.log("Request URL:", req.originalUrl);
    console.log('Request Type:', req.method);
    next();
});
let data = {"status":"true","data":{"stability":[{"all":"0.0031","all-attach":{"totalImeis":"1544047","totalExpCounts":"4769"},"index":"7.3.2","date":"7.3.2"},{"all":"0.0035","all-attach":{"totalImeis":"317145","totalExpCounts":"1123"},"MI3C(cancro)":"0.0041","MI3C(cancro)-attach":{"totalImeis":"37909","totalExpCounts":"157"},"MI3W(cancro)":"0.0035","MI3W(cancro)-attach":{"totalImeis":"50089","totalExpCounts":"176"},"index":"7.3.6","date":"7.3.6"},{"all":"0.0016","all-attach":{"totalImeis":"2610316","totalExpCounts":"4208"},"MI3C(cancro)":"0.0026","MI3C(cancro)-attach":{"totalImeis":"116237","totalExpCounts":"308"},"MI3W(cancro)":"0.0027","MI3W(cancro)-attach":{"totalImeis":"151606","totalExpCounts":"406"},"index":"7.3.9","date":"7.3.9"},{"all":"0.0012","all-attach":{"totalImeis":"2590096","totalExpCounts":"3166"},"MI3C(cancro)":"0.0018","MI3C(cancro)-attach":{"totalImeis":"113073","totalExpCounts":"207"},"MI3W(cancro)":"0.0019","MI3W(cancro)-attach":{"totalImeis":"149034","totalExpCounts":"277"},"index":"7.3.16","date":"7.3.16"},{"all":"0.0015","all-attach":{"totalImeis":"2480956","totalExpCounts":"3729"},"MI3C(cancro)":"0.0021","MI3C(cancro)-attach":{"totalImeis":"111260","totalExpCounts":"235"},"MI3W(cancro)":"0.0021","MI3W(cancro)-attach":{"totalImeis":"145202","totalExpCounts":"312"},"index":"7.3.23","date":"7.3.23"},{"all":"0.0005","all-attach":{"totalImeis":"9944","totalExpCounts":"5"},"index":"7.3.24","date":"7.3.24"},{"all":"0.0009","all-attach":{"totalImeis":"3468940","totalExpCounts":"3263"},"MI3C(cancro)":"0.0017","MI3C(cancro)-attach":{"totalImeis":"117318","totalExpCounts":"200"},"MI3W(cancro)":"0.0015","MI3W(cancro)-attach":{"totalImeis":"154064","totalExpCounts":"234"},"index":"7.3.30","date":"7.3.30"},{"all":"0.0012","all-attach":{"totalImeis":"2113334","totalExpCounts":"2516"},"MI3C(cancro)":"0.0016","MI3C(cancro)-attach":{"totalImeis":"109495","totalExpCounts":"172"},"MI3W(cancro)":"0.0015","MI3W(cancro)-attach":{"totalImeis":"143701","totalExpCounts":"215"},"index":"7.4.6","date":"7.4.6"},{"all":"0.0004","all-attach":{"totalImeis":"1138606","totalExpCounts":"429"},"index":"7.4.11","date":"7.4.11"},{"all":"0.0011","all-attach":{"totalImeis":"2295558","totalExpCounts":"2556"},"MI3C(cancro)":"0.0014","MI3C(cancro)-attach":{"totalImeis":"110931","totalExpCounts":"152"},"MI3W(cancro)":"0.0014","MI3W(cancro)-attach":{"totalImeis":"146290","totalExpCounts":"202"},"index":"7.4.13","date":"7.4.13"},{"all":"0.0004","all-attach":{"totalImeis":"130011","totalExpCounts":"54"},"index":"7.4.14","date":"7.4.14"},{"all":"0.0008","all-attach":{"totalImeis":"2963125","totalExpCounts":"2396"},"MI3C(cancro)":"0.0014","MI3C(cancro)-attach":{"totalImeis":"92435","totalExpCounts":"130"},"MI3W(cancro)":"0.0015","MI3W(cancro)-attach":{"totalImeis":"122285","totalExpCounts":"189"},"index":"7.4.20","date":"7.4.20"},{"all":"0.0015","all-attach":{"totalImeis":"101089","totalExpCounts":"155"},"index":"7.4.21","date":"7.4.21"},{"all":"0.0012","all-attach":{"totalImeis":"5050216","totalExpCounts":"6262"},"MI2SC(aries)":"0.0051","MI2SC(aries)-attach":{"totalImeis":"154929","totalExpCounts":"790"},"MI3C(cancro)":"0.0007","MI3C(cancro)-attach":{"totalImeis":"128667","totalExpCounts":"86"},"MI3W(cancro)":"0.0008","MI3W(cancro)-attach":{"totalImeis":"170204","totalExpCounts":"133"},"2014813(HM2014813)":"0.0006","2014813(HM2014813)-attach":{"totalImeis":"85670","totalExpCounts":"52"},"MI2S(aries)":"0.0068","MI2S(aries)-attach":{"totalImeis":"264234","totalExpCounts":"1799"},"MI2(aries)":"0.0065","MI2(aries)-attach":{"totalImeis":"116204","totalExpCounts":"755"},"index":"7.4.27","date":"7.4.27"},{"all":"0.0024","all-attach":{"totalImeis":"743123","totalExpCounts":"1753"},"index":"7.4.29","date":"7.4.29"},{"all":"0.0022","all-attach":{"totalImeis":"5063067","totalExpCounts":"11180"},"MI2SC(aries)":"0.0064","MI2SC(aries)-attach":{"totalImeis":"129478","totalExpCounts":"832"},"MI3C(cancro)":"0.0006","MI3C(cancro)-attach":{"totalImeis":"108758","totalExpCounts":"65"},"MI3W(cancro)":"0.0015","MI3W(cancro)-attach":{"totalImeis":"144462","totalExpCounts":"219"},"2014813(HM2014813)":"0.0444","2014813(HM2014813)-attach":{"totalImeis":"79692","totalExpCounts":"3536"},"MI2S(aries)":"0.0070","MI2S(aries)-attach":{"totalImeis":"220630","totalExpCounts":"1553"},"MI2(aries)":"0.0084","MI2(aries)-attach":{"totalImeis":"97142","totalExpCounts":"817"},"index":"7.5.4","date":"7.5.4"},{"all":"0.0010","all-attach":{"totalImeis":"6788016","totalExpCounts":"6461"},"MI2SC(aries)":"0.0063","MI2SC(aries)-attach":{"totalImeis":"97201","totalExpCounts":"611"},"MI3C(cancro)":"0.0005","MI3C(cancro)-attach":{"totalImeis":"141860","totalExpCounts":"66"},"MI3W(cancro)":"0.0005","MI3W(cancro)-attach":{"totalImeis":"187332","totalExpCounts":"86"},"2014813(HM2014813)":"0.0004","2014813(HM2014813)-attach":{"totalImeis":"109416","totalExpCounts":"49"},"MI2S(aries)":"0.0063","MI2S(aries)-attach":{"totalImeis":"193983","totalExpCounts":"1225"},"MI2(aries)":"0.0081","MI2(aries)-attach":{"totalImeis":"71865","totalExpCounts":"584"},"index":"7.5.11","date":"7.5.11"},{"all":"0.0016","all-attach":{"totalImeis":"3321567","totalExpCounts":"5224"},"MI2SC(aries)":"0.0063","MI2SC(aries)-attach":{"totalImeis":"87221","totalExpCounts":"551"},"MI3C(cancro)":"0.0008","MI3C(cancro)-attach":{"totalImeis":"69663","totalExpCounts":"54"},"MI3W(cancro)":"0.0009","MI3W(cancro)-attach":{"totalImeis":"92739","totalExpCounts":"79"},"2014813(HM2014813)":"0.0063","2014813(HM2014813)-attach":{"totalImeis":"54436","totalExpCounts":"343"},"MI2S(aries)":"0.0067","MI2S(aries)-attach":{"totalImeis":"149512","totalExpCounts":"1004"},"MI2(aries)":"0.0082","MI2(aries)-attach":{"totalImeis":"64652","totalExpCounts":"530"},"index":"7.5.19","date":"7.5.19"},{"all":"0.0033","all-attach":{"totalImeis":"9307993","totalExpCounts":"30727"},"MI2SC(aries)":"0.0032","MI2SC(aries)-attach":{"totalImeis":"255687","totalExpCounts":"830"},"MI3C(cancro)":"0.0006","MI3C(cancro)-attach":{"totalImeis":"211669","totalExpCounts":"137"},"MI3W(cancro)":"0.0010","MI3W(cancro)-attach":{"totalImeis":"281212","totalExpCounts":"271"},"2014813(HM2014813)":"0.0033","2014813(HM2014813)-attach":{"totalImeis":"149775","totalExpCounts":"487"},"MI2S(aries)":"0.0449","MI2S(aries)-attach":{"totalImeis":"435838","totalExpCounts":"19555"},"MI2(aries)":"0.0058","MI2(aries)-attach":{"totalImeis":"193873","totalExpCounts":"1118"},"index":"7.5.25","date":"7.5.25"},{"all":"0.0015","all-attach":{"totalImeis":"287272","totalExpCounts":"426"},"index":"7.5.26","date":"7.5.26"},{"all":"0.0004","all-attach":{"totalImeis":"117738","totalExpCounts":"52"},"index":"7.6.5","date":"7.6.5"},{"all":"0.0037","all-attach":{"totalImeis":"9470053","totalExpCounts":"35036"},"MI2SC(aries)":"0.0051","MI2SC(aries)-attach":{"totalImeis":"534220","totalExpCounts":"2745"},"MI3C(cancro)":"0.0007","MI3C(cancro)-attach":{"totalImeis":"59717","totalExpCounts":"39"},"MI3W(cancro)":"0.0007","MI3W(cancro)-attach":{"totalImeis":"79967","totalExpCounts":"54"},"2014813(HM2014813)":"0.0257","2014813(HM2014813)-attach":{"totalImeis":"551481","totalExpCounts":"14192"},"MI2S(aries)":"0.0063","MI2S(aries)-attach":{"totalImeis":"1194930","totalExpCounts":"7563"},"MI2(aries)":"0.0057","MI2(aries)-attach":{"totalImeis":"547039","totalExpCounts":"3142"},"index":"7.6.8","date":"7.6.8"},{"all":"0.0011","all-attach":{"totalImeis":"4010363","totalExpCounts":"4264"},"index":"7.6.10","date":"7.6.10"},{"all":"0.0002","all-attach":{"totalImeis":"15938","totalExpCounts":"3"},"index":"7.6.12","date":"7.6.12"},{"all":"0.0007","all-attach":{"totalImeis":"11197011","totalExpCounts":"7678"},"MI3C(cancro)":"0.0008","MI3C(cancro)-attach":{"totalImeis":"846072","totalExpCounts":"653"},"MI3W(cancro)":"0.0007","MI3W(cancro)-attach":{"totalImeis":"1166001","totalExpCounts":"847"},"index":"7.6.14","date":"7.6.14"},{"all":"0.0002","all-attach":{"totalImeis":"1790878","totalExpCounts":"293"},"index":"7.6.15","date":"7.6.15"},{"all":"0.0023","all-attach":{"totalImeis":"1703","totalExpCounts":"4"},"index":"7.6.21","date":"7.6.21"},{"all":"0.0002","all-attach":{"totalImeis":"82869","totalExpCounts":"16"},"index":"7.6.22","date":"7.6.22"},{"all":"0.0002","all-attach":{"totalImeis":"45322","totalExpCounts":"11"},"index":"7.6.24","date":"7.6.24"},{"all":"0.0002","all-attach":{"totalImeis":"754528","totalExpCounts":"116"},"index":"7.6.25","date":"7.6.25"},{"all":"0.0001","all-attach":{"totalImeis":"1594463","totalExpCounts":"231"},"index":"7.6.29","date":"7.6.29"},{"all":"0.0002","all-attach":{"totalImeis":"1580577","totalExpCounts":"277"},"index":"7.7.6","date":"7.7.6"},{"all":"0.0009","all-attach":{"totalImeis":"210751","totalExpCounts":"196"},"index":"7.7.7","date":"7.7.7"},{"all":"0.0002","all-attach":{"totalImeis":"1351373","totalExpCounts":"235"},"index":"7.7.13","date":"7.7.13"},{"all":"0.0002","all-attach":{"totalImeis":"174218","totalExpCounts":"33"},"index":"7.7.15","date":"7.7.15"},{"all":"0.0002","all-attach":{"totalImeis":"6018322","totalExpCounts":"1317"},"index":"7.7.20","date":"7.7.20"},{"all":"0.0012","all-attach":{"totalImeis":"60170","totalExpCounts":"74"},"index":"7.7.28","date":"7.7.28"},{"all":"0.0008","all-attach":{"totalImeis":"15558","totalExpCounts":"12"},"index":"7.7.31","date":"7.7.31"},{"all":"0.0020","all-attach":{"totalImeis":"14938","totalExpCounts":"30"},"index":"7.8.1","date":"7.8.1"},{"all":"0.0012","all-attach":{"totalImeis":"19073","totalExpCounts":"23"},"index":"7.8.3","date":"7.8.3"},{"all":"0.0006","all-attach":{"totalImeis":"102278","totalExpCounts":"64"},"index":"7.8.4","date":"7.8.4"},{"all":"0.0004","all-attach":{"totalImeis":"16721","totalExpCounts":"6"},"index":"7.8.7","date":"7.8.7"},{"all":"0.0006","all-attach":{"totalImeis":"28802","totalExpCounts":"18"},"index":"7.8.8","date":"7.8.8"},{"all":"0.0004","all-attach":{"totalImeis":"23932","totalExpCounts":"9"},"index":"7.8.9","date":"7.8.9"},{"all":"0.0015","all-attach":{"totalImeis":"426563","totalExpCounts":"622"},"index":"7.8.10","date":"7.8.10"},{"all":"0.0006","all-attach":{"totalImeis":"37957","totalExpCounts":"22"},"index":"7.8.14","date":"7.8.14"},{"all":"0.0008","all-attach":{"totalImeis":"98077","totalExpCounts":"81"},"index":"7.8.15","date":"7.8.15"},{"all":"0.0004","all-attach":{"totalImeis":"38561","totalExpCounts":"14"},"index":"7.8.16","date":"7.8.16"},{"all":"0.0009","all-attach":{"totalImeis":"681060","totalExpCounts":"598"},"index":"7.8.17","date":"7.8.17"},{"all":"1.4558","all-attach":{"totalImeis":"39913","totalExpCounts":"58107"},"index":"7.8.21","date":"7.8.21"},{"all":"1.4209","all-attach":{"totalImeis":"27853","totalExpCounts":"39575"},"index":"7.8.22","date":"7.8.22"},{"all":"0.6555","all-attach":{"totalImeis":"33247","totalExpCounts":"21794"},"index":"7.8.23","date":"7.8.23"},{"all":"0.1001","all-attach":{"totalImeis":"2602859","totalExpCounts":"260553"},"index":"7.8.24","date":"7.8.24"},{"all":"0.1014","all-attach":{"totalImeis":"127333","totalExpCounts":"12907"},"index":"7.8.25","date":"7.8.25"},{"all":"0.0852","all-attach":{"totalImeis":"33824","totalExpCounts":"2882"},"index":"7.8.29","date":"7.8.29"},{"all":"0.0609","all-attach":{"totalImeis":"59412","totalExpCounts":"3621"},"index":"7.8.30","date":"7.8.30"},{"all":"0.0467","all-attach":{"totalImeis":"2536416","totalExpCounts":"118447"},"index":"7.8.31","date":"7.8.31"},{"all":"0.0408","all-attach":{"totalImeis":"94912","totalExpCounts":"3872"},"index":"7.9.1","date":"7.9.1"},{"all":"0.0072","all-attach":{"totalImeis":"3676950","totalExpCounts":"26529"},"MI2SC(aries)":"0.0023","MI2SC(aries)-attach":{"totalImeis":"95064","totalExpCounts":"215"},"MI3C(cancro)":"0.0004","MI3C(cancro)-attach":{"totalImeis":"76425","totalExpCounts":"30"},"MI3W(cancro)":"0.0005","MI3W(cancro)-attach":{"totalImeis":"104427","totalExpCounts":"48"},"2014813(HM2014813)":"0.0005","2014813(HM2014813)-attach":{"totalImeis":"73010","totalExpCounts":"33"},"MI2S(aries)":"0.0021","MI2S(aries)-attach":{"totalImeis":"159911","totalExpCounts":"338"},"MI2(aries)":"0.0020","MI2(aries)-attach":{"totalImeis":"71535","totalExpCounts":"145"},"index":"7.9.7","date":"7.9.7"},{"all":"0.0321","all-attach":{"totalImeis":"1411038","totalExpCounts":"45363"},"index":"7.9.8","date":"7.9.8"},{"all":"0.0106","all-attach":{"totalImeis":"5830023","totalExpCounts":"61817"},"MI2SC(aries)":"0.0013","MI2SC(aries)-attach":{"totalImeis":"73859","totalExpCounts":"96"},"MI3C(cancro)":"0.0004","MI3C(cancro)-attach":{"totalImeis":"62735","totalExpCounts":"24"},"MI3W(cancro)":"0.0004","MI3W(cancro)-attach":{"totalImeis":"86074","totalExpCounts":"35"},"2014813(HM2014813)":"0.0004","2014813(HM2014813)-attach":{"totalImeis":"57157","totalExpCounts":"23"},"MI2S(aries)":"0.0018","MI2S(aries)-attach":{"totalImeis":"126960","totalExpCounts":"234"},"MI2(aries)":"0.0015","MI2(aries)-attach":{"totalImeis":"55596","totalExpCounts":"83"},"index":"7.9.14","date":"7.9.14"},{"all":"0.0133","all-attach":{"totalImeis":"23160","totalExpCounts":"309"},"index":"7.9.20","date":"7.9.20"},{"all":"0.0072","all-attach":{"totalImeis":"11800401","totalExpCounts":"85280"},"MI2SC(aries)":"0.0023","MI2SC(aries)-attach":{"totalImeis":"270586","totalExpCounts":"635"},"MI3C(cancro)":"0.0007","MI3C(cancro)-attach":{"totalImeis":"237539","totalExpCounts":"171"},"MI3W(cancro)":"0.0008","MI3W(cancro)-attach":{"totalImeis":"306990","totalExpCounts":"234"},"2014813(HM2014813)":"0.0007","2014813(HM2014813)-attach":{"totalImeis":"146199","totalExpCounts":"107"},"MI2S(aries)":"0.0025","MI2S(aries)-attach":{"totalImeis":"439673","totalExpCounts":"1118"},"MI2(aries)":"0.0027","MI2(aries)-attach":{"totalImeis":"192903","totalExpCounts":"515"},"index":"7.9.21","date":"7.9.21"},{"all":"0.0262","all-attach":{"totalImeis":"110435","totalExpCounts":"2898"},"index":"7.9.22","date":"7.9.22"},{"all":"0.0192","all-attach":{"totalImeis":"4376","totalExpCounts":"84"},"index":"7.9.26","date":"7.9.26"},{"all":"0.0150","all-attach":{"totalImeis":"49321","totalExpCounts":"739"},"index":"7.9.27","date":"7.9.27"},{"all":"0.0110","all-attach":{"totalImeis":"1241783","totalExpCounts":"13653"},"index":"7.9.28","date":"7.9.28"},{"all":"0.0060","all-attach":{"totalImeis":"6239333","totalExpCounts":"37174"},"MI2SC(aries)":"0.0017","MI2SC(aries)-attach":{"totalImeis":"89766","totalExpCounts":"152"},"MI3C(cancro)":"0.0007","MI3C(cancro)-attach":{"totalImeis":"79475","totalExpCounts":"53"},"MI3W(cancro)":"0.0006","MI3W(cancro)-attach":{"totalImeis":"108602","totalExpCounts":"60"},"2014813(HM2014813)":"0.0003","2014813(HM2014813)-attach":{"totalImeis":"73219","totalExpCounts":"22"},"MI2S(aries)":"0.0021","MI2S(aries)-attach":{"totalImeis":"153952","totalExpCounts":"325"},"MI2(aries)":"0.0018","MI2(aries)-attach":{"totalImeis":"66927","totalExpCounts":"119"},"index":"7.10.12","date":"7.10.12"},{"all":"0.0006","all-attach":{"totalImeis":"8061","totalExpCounts":"5"},"index":"7.10.13","date":"7.10.13"},{"all":"0.0125","all-attach":{"totalImeis":"131278","totalExpCounts":"1637"},"index":"7.10.14","date":"7.10.14"},{"all":"0.0065","all-attach":{"totalImeis":"6729509","totalExpCounts":"43917"},"MI2SC(aries)":"0.0016","MI2SC(aries)-attach":{"totalImeis":"86853","totalExpCounts":"139"},"MI3C(cancro)":"0.0006","MI3C(cancro)-attach":{"totalImeis":"78354","totalExpCounts":"45"},"MI3W(cancro)":"0.0006","MI3W(cancro)-attach":{"totalImeis":"108204","totalExpCounts":"70"},"2014813(HM2014813)":"0.0003","2014813(HM2014813)-attach":{"totalImeis":"72550","totalExpCounts":"19"},"MI2S(aries)":"0.0014","MI2S(aries)-attach":{"totalImeis":"148465","totalExpCounts":"207"},"MI2(aries)":"0.0016","MI2(aries)-attach":{"totalImeis":"64746","totalExpCounts":"101"},"index":"7.10.19","date":"7.10.19"},{"all":"0.0068","all-attach":{"totalImeis":"6976383","totalExpCounts":"47724"},"MI2SC(aries)":"0.0016","MI2SC(aries)-attach":{"totalImeis":"83849","totalExpCounts":"134"},"MI3C(cancro)":"0.0006","MI3C(cancro)-attach":{"totalImeis":"77174","totalExpCounts":"49"},"MI3W(cancro)":"0.0006","MI3W(cancro)-attach":{"totalImeis":"105315","totalExpCounts":"64"},"2014813(HM2014813)":"0.0004","2014813(HM2014813)-attach":{"totalImeis":"70300","totalExpCounts":"31"},"MI2S(aries)":"0.0016","MI2S(aries)-attach":{"totalImeis":"142661","totalExpCounts":"230"},"MI2(aries)":"0.0017","MI2(aries)-attach":{"totalImeis":"62719","totalExpCounts":"106"},"index":"7.10.26","date":"7.10.26"},{"all":"0.0058","all-attach":{"totalImeis":"5262619","totalExpCounts":"30538"},"MI2SC(aries)":"0.0018","MI2SC(aries)-attach":{"totalImeis":"86139","totalExpCounts":"155"},"MI3C(cancro)":"0.0007","MI3C(cancro)-attach":{"totalImeis":"79548","totalExpCounts":"54"},"MI3W(cancro)":"0.0007","MI3W(cancro)-attach":{"totalImeis":"107672","totalExpCounts":"77"},"2014813(HM2014813)":"0.0003","2014813(HM2014813)-attach":{"totalImeis":"75284","totalExpCounts":"26"},"MI2S(aries)":"0.0025","MI2S(aries)-attach":{"totalImeis":"146580","totalExpCounts":"363"},"MI2(aries)":"0.0024","MI2(aries)-attach":{"totalImeis":"64682","totalExpCounts":"154"},"index":"7.11.2","date":"7.11.2"},{"all":"0.0087","all-attach":{"totalImeis":"910830","totalExpCounts":"7922"},"index":"7.11.3","date":"7.11.3"},{"all":"0.0066","all-attach":{"totalImeis":"5356741","totalExpCounts":"35440"},"MI2SC(aries)":"0.0021","MI2SC(aries)-attach":{"totalImeis":"84346","totalExpCounts":"174"},"MI3C(cancro)":"0.0003","MI3C(cancro)-attach":{"totalImeis":"77528","totalExpCounts":"25"},"MI3W(cancro)":"0.0005","MI3W(cancro)-attach":{"totalImeis":"105307","totalExpCounts":"50"},"2014813(HM2014813)":"0.0004","2014813(HM2014813)-attach":{"totalImeis":"73227","totalExpCounts":"32"},"MI2S(aries)":"0.0029","MI2S(aries)-attach":{"totalImeis":"142408","totalExpCounts":"414"},"MI2(aries)":"0.0025","MI2(aries)-attach":{"totalImeis":"61621","totalExpCounts":"155"},"index":"7.11.9","date":"7.11.9"},{"all":"0.0004","all-attach":{"totalImeis":"135972","totalExpCounts":"55"},"index":"7.11.11","date":"7.11.11"},{"all":"0.0114","all-attach":{"totalImeis":"400077","totalExpCounts":"4575"},"index":"7.11.13","date":"7.11.13"},{"all":"0.0051","all-attach":{"totalImeis":"8823578","totalExpCounts":"45326"},"MI2SC(aries)":"0.0022","MI2SC(aries)-attach":{"totalImeis":"399738","totalExpCounts":"869"},"MI3C(cancro)":"0.0003","MI3C(cancro)-attach":{"totalImeis":"74554","totalExpCounts":"22"},"MI3W(cancro)":"0.0004","MI3W(cancro)-attach":{"totalImeis":"101240","totalExpCounts":"41"},"2014813(HM2014813)":"0.0005","2014813(HM2014813)-attach":{"totalImeis":"355094","totalExpCounts":"176"},"MI2S(aries)":"0.0025","MI2S(aries)-attach":{"totalImeis":"679560","totalExpCounts":"1714"},"MI2(aries)":"0.0026","MI2(aries)-attach":{"totalImeis":"134000","totalExpCounts":"347"},"index":"7.11.16","date":"7.11.16"},{"all":"0.0068","all-attach":{"totalImeis":"5335683","totalExpCounts":"36383"},"MI3C(cancro)":"0.0004","MI3C(cancro)-attach":{"totalImeis":"72205","totalExpCounts":"28"},"MI3W(cancro)":"0.0004","MI3W(cancro)-attach":{"totalImeis":"97882","totalExpCounts":"40"},"index":"7.11.23","date":"7.11.23"},{"all":"0.0072","all-attach":{"totalImeis":"5860824","totalExpCounts":"42242"},"MI3C(cancro)":"0.0002","MI3C(cancro)-attach":{"totalImeis":"72670","totalExpCounts":"11"},"MI3W(cancro)":"0.0001","MI3W(cancro)-attach":{"totalImeis":"97373","totalExpCounts":"12"},"index":"7.11.30","date":"7.11.30"},{"all":"0.0093","all-attach":{"totalImeis":"5124585","totalExpCounts":"47587"},"MI3C(cancro)":"0.0004","MI3C(cancro)-attach":{"totalImeis":"71097","totalExpCounts":"29"},"MI3W(cancro)":"0.0006","MI3W(cancro)-attach":{"totalImeis":"91880","totalExpCounts":"51"},"index":"7.12.7","date":"7.12.7"},{"all":"0.0037","all-attach":{"totalImeis":"557338","totalExpCounts":"2049"},"index":"7.12.8","date":"7.12.8"},{"all":"0.0003","all-attach":{"totalImeis":"130074","totalExpCounts":"38"},"index":"7.12.9","date":"7.12.9"},{"all":"0.0062","all-attach":{"totalImeis":"4420526","totalExpCounts":"27251"},"MI3C(cancro)":"0.0003","MI3C(cancro)-attach":{"totalImeis":"69111","totalExpCounts":"19"},"MI3W(cancro)":"0.0003","MI3W(cancro)-attach":{"totalImeis":"92538","totalExpCounts":"28"},"index":"7.12.14","date":"7.12.14"},{"all":"0.0098","all-attach":{"totalImeis":"212940","totalExpCounts":"2085"},"index":"7.12.15","date":"7.12.15"},{"all":"0.0072","all-attach":{"totalImeis":"3447637","totalExpCounts":"24851"},"MI3C(cancro)":"0.0005","MI3C(cancro)-attach":{"totalImeis":"65700","totalExpCounts":"30"},"MI3W(cancro)":"0.0004","MI3W(cancro)-attach":{"totalImeis":"90546","totalExpCounts":"35"},"index":"7.12.21","date":"7.12.21"},{"all":"0.0225","all-attach":{"totalImeis":"5379","totalExpCounts":"121"},"index":"7.12.25","date":"7.12.25"},{"all":"0.0078","all-attach":{"totalImeis":"4696358","totalExpCounts":"36519"},"MI3C(cancro)":"0.0005","MI3C(cancro)-attach":{"totalImeis":"70700","totalExpCounts":"35"},"MI3W(cancro)":"0.0005","MI3W(cancro)-attach":{"totalImeis":"97743","totalExpCounts":"48"},"index":"7.12.28","date":"7.12.28"},{"all":"0.0089","all-attach":{"totalImeis":"4658685","totalExpCounts":"41249"},"MI3C(cancro)":"0.0005","MI3C(cancro)-attach":{"totalImeis":"69357","totalExpCounts":"35"},"MI3W(cancro)":"0.0005","MI3W(cancro)-attach":{"totalImeis":"96412","totalExpCounts":"45"},"index":"8.1.4","date":"8.1.4"},{"all":"0.0086","all-attach":{"totalImeis":"4581025","totalExpCounts":"39360"},"MI3C(cancro)":"0.0003","MI3C(cancro)-attach":{"totalImeis":"69897","totalExpCounts":"20"},"MI3W(cancro)":"0.0004","MI3W(cancro)-attach":{"totalImeis":"97093","totalExpCounts":"39"},"index":"8.1.11","date":"8.1.11"},{"all":"0.0002","all-attach":{"totalImeis":"73825","totalExpCounts":"18"},"index":"8.1.12","date":"8.1.12"},{"all":"0.0085","all-attach":{"totalImeis":"5796826","totalExpCounts":"49473"},"MI3C(cancro)":"0.0003","MI3C(cancro)-attach":{"totalImeis":"70298","totalExpCounts":"22"},"MI3W(cancro)":"0.0003","MI3W(cancro)-attach":{"totalImeis":"97131","totalExpCounts":"33"},"index":"8.1.18","date":"8.1.18"},{"all":"0.0074","all-attach":{"totalImeis":"5557121","totalExpCounts":"41383"},"MI3C(cancro)":"0.0005","MI3C(cancro)-attach":{"totalImeis":"67189","totalExpCounts":"36"},"MI3W(cancro)":"0.0004","MI3W(cancro)-attach":{"totalImeis":"93629","totalExpCounts":"33"},"index":"8.1.25","date":"8.1.25"},{"all":"0.0028","all-attach":{"totalImeis":"20923083","totalExpCounts":"58529"},"MI3C(cancro)":"0.0002","MI3C(cancro)-attach":{"totalImeis":"447768","totalExpCounts":"95"},"MI3W(cancro)":"0.0003","MI3W(cancro)-attach":{"totalImeis":"615620","totalExpCounts":"155"},"index":"8.2.1","date":"8.2.1"},{"all":"0.0003","all-attach":{"totalImeis":"1061196","totalExpCounts":"355"},"index":"8.2.2","date":"8.2.2"},{"all":"0.0068","all-attach":{"totalImeis":"1603911","totalExpCounts":"10920"},"index":"8.2.9","date":"8.2.9"},{"all":"0.0044","all-attach":{"totalImeis":"7234302","totalExpCounts":"32142"},"MI3C(cancro)":"0.0003","MI3C(cancro)-attach":{"totalImeis":"79152","totalExpCounts":"26"},"MI3W(cancro)":"0.0004","MI3W(cancro)-attach":{"totalImeis":"110219","totalExpCounts":"40"},"index":"8.3.1","date":"8.3.1"},{"all":"0.0043","all-attach":{"totalImeis":"2080504","totalExpCounts":"9017"},"MI3C(cancro)":"0.0001","MI3C(cancro)-attach":{"totalImeis":"19298","totalExpCounts":"1"},"MI3W(cancro)":"0.0001","MI3W(cancro)-attach":{"totalImeis":"26736","totalExpCounts":"2"},"index":"8.3.8","date":"8.3.8"}],"type":"miui_app_crash"},"isNew":true};

let count = 1 ;
router.get('/mqsas/exp/stability/summary/app.do', function (req, res, next) {

    setTimeout(()=>{

        res.send(data)
    }, 10000 * count--)
})
/**
 * router - 检查数据库是否有响应的mock
 */
 let db = require('../db/models')
 db.then((value) => {
     router.use(mockRoute);
 }).catch((err) => {
     console.log(err);
     console.log('mock数据库连接失败', '------------');
 })

router.use(checklogin)

_.map(actionRoutes, (value, name) => {
    if (value.type === "POST" || value.type === "post") {
        router.post(
            name,
            function(req, res, next) {
                const action = require("../actions/" + value.data);
                action(req, res, next);
            },
            function(req, res, next) {
                // console.log(req, 'next')
            }
        );
    } else {
        router.get(
            name,
            function(req, res, next) {
                const action = require("../actions/" + value.data);
                action(req, res, next);
            },
            function(req, res, next) {
                // console.log(req, 'next')
            }
        );
    }
});

router.post('/actions/login', login)
module.exports = router;
